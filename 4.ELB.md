# 7 layer OSI model:
```
 1 Physical ‚Üí Transmits raw bits over cable (electrical/optical signals)
 2 Data Link ‚Üí Frames created, MAC address used for local delivery
 3 Network ‚Üí IP address used for routing between networks
 4 Transport ‚Üí TCP/UDP segments, port numbers, reliability control
 5 Session ‚Üí Session establishment and management
 6 Presentation ‚Üí Encryption/Decryption, formatting
 7 Application ‚Üí HTTP request processed by application
```
![image alt](https://github.com/ashu-1808/AWS/blob/f4307431631f717353102e5594ea1b2c1c9cedf0/osi-model-7-layers-1.jpg)

# ELB (Elastic Load Balancer)

```
Elastic Load Balancing (ELB) is an AWS service that automatically distributes incoming application traffic across multiple backend targets such as EC2 instances.
 It improves application availability, scalability, and fault tolerance.
 - ELB distributes incoming traffic evenly among available and healthy backend servers.
 - It is a region-specific service and must be created within a specific AWS region.
 - ELB follows a pay-as-you-go pricing model and is charged on an hourly basis along with data processing charges.
 - Deleting an ELB does not delete the EC2 instances registered with it.
 - If a load balancer fails, it does not impact backend servers or end users because it is a highly available managed service provided by AWS.


2. Registered Instances
Registered instances are EC2 instances that are attached to the load balancer to receive traffic. These instances are defined within a target group.


3. Target Group
A target group is a logical grouping of backend targets behind the load balancer.
 - Targets can include EC2 instances, IP addresses, or Lambda functions.
 - A target group can contain up to 200 targets.
 - The load balancer routes incoming requests to targets within the associated target group.

4. Listeners
A listener is a process that checks for connection requests and defines how traffic is routed.
  b. Frontend Listener
    - Handles traffic from the client to the load balancer.
    - Common protocols include HTTP (Port 80) and HTTPS (Port 443).
   a. Backend Communication
    - The load balancer forwards traffic from itself to the registered and healthy backend instances.
    - Traffic is routed based on configured listener rules and target group settings.

5. Health Check
A health check is a monitoring mechanism used to determine the availability and responsiveness of backend servers.
 - ELB periodically checks the health of registered targets.
 - If a target fails the health check, traffic is automatically stopped for that instance.
 - Once the target becomes healthy again, traffic routing resumes automatically.


```


![image alt](https://github.com/ashu-1808/AWS/blob/b0eb49d44d3e5b9fd83345b811dc9391104594bc/application-load-.jpg)
```
Types of Load Balancer:
1. Application Load Balancer (ALB)
 - Works at: OSI Layer 7 (HTTP/HTTPS)
 - Feature: Supports microservices and containers
  SSL/TLS termination, Native integration with ECS, EKS
 - Use when: ALB is best for smart routing at the application layer, REST APIs

2. Network Load Balancer (NLB)
 - Works at: OSI Layer 4 (TCP, UDP, TLS)
 - Feature: Handle millions of requests per second
  Low latency, Static IP support, ideal for non HTTP traffic
 - Used when: NLB is for speed, scale and low latency
  (Database/messaging), TCP/UDP
  High performance workload
  Real-Time systems

3. Gateway Load Balancer (GLB)
 - Works at: OSI Layer 3/4 (Network traffic inspection)
 - Feature: Designed for security application
  Integrate with firewalls, IDS/IPS
 - Used at: GLB is for security, not web traffic
  Firewall security, Centralized network security

4. Classic Load Balancer (CLB) (Legacy)
 - Works at: OSI Layer 4 / Basic Layer 7
 - Feature: Older generation, limited routing capacity
 - Used for: Maintaining legacy system only
 - Note: Not for new application

ELB Advantages:
 1. High Availability
 2. Health checks ‚Üí No downtime
 3. Auto scaling ‚Üí Traffic to healthy targets only
 4. Security ‚Üí Handles traffic spikes
 5. Cost efficient ‚Üí Pay as you go

ELB Disadvantages:
 1. Debugging is most difficult
 2. Vendor lock-in ‚Üí Hard to migrate
 3. Limited control ‚Üí less tuning
 4. Limits ‚Üí Depends on ELB type



Health Checks :
They determine whether a target is healthy and able to receive traffic
1. Healthy threshold:
  No. of consecutive successful health checks required before target is marked healthy
  Eg: If healthy threshold is 3 ‚Üí then target must pass 3 continuous checks

2. Unhealthy threshold:
  Number of consecutive health checks required before target is marked unhealthy
  Eg: If unhealthy threshold is 4 ‚Üí After 4 target failures, traffic stops

3. Timeout:
  Maximum time ELB waits for a response from target
  Eg: If timeout is 5 seconds ‚Üí No response within 5 second = failure
  (Should be less than interval time)

4. Interval:
  Time between consecutive health check request
  Eg: If interval is 30 seconds ‚Üí Health check happens every 30 seconds
  (Smaller than timeout)

```



## Steps to Create ELB (Application Load Balancer ‚Äì ALB)
```
üìù Architecture Overview
1. VPC
2. Public Subnets (at least 2 AZs recommended)
3. Application Load Balancer (ALB)
4. Target Group
5. EC2 Instances (EC2-1, EC2-2)
6. Traffic distributed across instances

Step 1: Create VPC (If not already created)
 1. Go to VPC Dashboard
 2. Create VPC (Example CIDR: `10.0.0.0/16`)
 3. Create 2 Public Subnets in different AZs
 4. Attach Internet Gateway
 5. Update Route Table ‚Üí `0.0.0.0/0` ‚Üí Internet Gateway

Step 2: Launch EC2 Instances
 1. Go to EC2 Dashboard
 2. Click Launch Instance
 3. Choose AMI (Amazon Linux)
 4. Select Instance Type
 5. Choose VPC and Public Subnet
 6. Enable Auto-assign Public IP
 7. Configure Security Group:
    - Allow HTTP (Port 80)
    - Allow SSH (Port 22)
 8. Launch 2 instances (EC2-1, EC2-2)
  ‚Üí sudo yum install httpd -y
  ‚Üí sudo systemctl start httpd

Step 3: Create Target Group
 1. Go to EC2 ‚Üí Target Groups
 2. Click Create Target Group
 3. Choose:
    - Target Type: Instances
    - Protocol: HTTP
    - Port: 80
 4. Select VPC
 5. Click Next
 6. Register EC2-1 and EC2-2
 7. Click Create Target Group

Step 4: Create Application Load Balancer (ALB)
 1. Go to EC2 ‚Üí Load Balancers
 2. Click Create Load Balancer
 3. Choose Application Load Balancer
 4. Configure:
    - Scheme: Internet-facing
    - IP type: IPv4
    - Select VPC
    - Select at least 2 Public Subnets
 5. Configure Security Group:
    - Allow HTTP (Port 80) from Anywhere
 6. In Listeners and Routing
    - Forward to created Target Group
 7. Click Create Load Balancer

Step 5: Verify ALB
 1. Copy the DNS name of ALB
 2. Paste in browser
 3. Refresh multiple times
 4. Traffic should distribute between:
   - EC2-1
   - EC2-2


üéØ Key Points
* ALB works at **Layer 7 (Application Layer)**
* Uses **Target Groups**
* Performs **Health Checks**
* Supports path-based & host-based routing
* Highly available (Multi-AZ)


```
#  Final Architecture After ELB Setup

![image alt](https://github.com/Ashu-1808/AWS-cloud-computing-for-devops/blob/68854f1ed61d3ad8bbaef29d2af23c57f3e3927f/flowchart%20load%20balancing.png)

