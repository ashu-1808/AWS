
#  Amazon S3

##  What is S3?
```
1 S3 is region-specific
2 Used to store and retrieve unlimited data
3 It is object-based storage
- ❌ Cannot install OS on S3
- Data stored in minimum 3 AZs in same region
- Very high durability (99.999999999%)
- Buckets in S3
   1. Bucket is a container for objects
   2. Bucket structure is flat
   3. ❌ No nested buckets (no bucket inside bucket)
   4. Bucket name must be globally unique  
-S3 Object Size
   1. Minimum → 0 bytes
   2. Maximum → 5 TB
-S3 Bucket Limits
   1. Default → 100 buckets per account
   2. Can request increase from AWS
-S3 Bucket Name Rules
   1. Must be globally unique
   2. No duplicate bucket names in AWS
-S3 Bucket Access Methods
   1.ACL (Access Control List)
    a. Used for basic permissions
    b. Controls access at:Bucket level
                      Object level
-S3 Bucket Policy
   1. Must delete all objects before deleting bucket
   2. JSON-based
   3. Used for detailed permissions
   4. Applied at bucket level

```


## Amazon S3 Properties 
```
1) Bucket Versioning
  - Keeps multiple versions of the same object.
  - Helps recover files that are accidentally deleted or overwritten.
  - Must be enabled on the bucket.

2) Encryption
   A) Server-Side Encryption (SSE)
     - S3 encrypts data before storing it.
     - S3 decrypts data when you download it.
     - All new S3 objects are encrypted by default.
     - Types:
       1. SSE-S3 (Default):
        - Uses AES-256 encryption.
        - Managed completely by AWS.
       2. SSE-KMS:
        - Uses AWS Key Management Service (KMS).
        - Gives more control over encryption keys.
        - Can use AWS managed key or customer managed key.
      3. DSSE-KMS (Double Encryption):
         - Applies two layers of encryption
         - Used for high security and compliance needs.
   B) Client-Side Encryption
    - You encrypt data before uploading to S3.
    - You manage: Encryption keys, Encryption tools, Entire encryption process
       
3) Transfer Acceleration
  - Speeds up upload and download of data to/from S3.
  - Uses AWS global edge network.
  - ⚠️ Extra cost applies.

4) Requester Pays
 - Normally, bucket owner pays for storage and data transfer.
 - The person downloading data pays for download cost.
 - Bucket owner still pays for storage.
 - Useful when sharing large datasets.
 -Example:Public data, Reference data, Geographic data.


5) Object Lock
- Uses WORM (Write Once, Read Many) model.
- Prevents objects from being Deleted and Overwritten.
- Can lock for Fixed time or Indefinitely
- Works only with versioning enabled buckets.

6) Static Website Hosting
- S3 can host static websites.
- Supports: HTML, CSS, JavaScript
- ❌ Not support server-side scripting like: PHP, JSP, ASP.NET
   For dynamic websites, use: EC2, Elastic Beanstalk, Lambda
```


## Amazon S3 storage class:
![image alt](https://github.com/Ashu-1808/AWS-cloud-computing-for-devops/blob/e7cf2f64449efbdfff60d1468816ef30d1859d9f/storage%20class.webp)
```

1. S3-Standard :
  a) S3 standard offers high durability, availability and performance object storage for frequently accessed data 
  b) Durability is 99.999999999%                                                                                  
  c) Availability is 99.99%                                                                                       
  d) The cost of data is high but there is very less charge for accessing the object                              

2. S3-Standard-IA (Infrequent Access) :
  a) S3-Standard-IA is for data that is accessed infrequently but requires rapid access when needed                                        
  b) The cost of storage is much cheaper than the S3-Standard almost half the price,
     But you are charged heavily for accessing your object 
  c) Durability is 99.999999999%                                                                                                           
  d) Availability is 99.9%                                                                                                                 

3. S3-Intelligent Tiering :
  a0 S3- Intelligent tiering is the first cloud storage that automatically reduces your storage cost by automatically
   moving data to most cost effective access tier based on thier access 
  b) It works by storing data in tiers                                                                                                                                         
  c) If your object is in Infrequent Access tier is accessed, then it is automatically moved back to the
   frequently accessed tier
  d) Thier is no retrieval fees when using S3-Intelligent tiering storage class and no additional tiering
   fees when objects are moved back between access tier 
  e) Durability is 99.999999999%
  f) Availability is 99.9%  

4. S3-OneZoned Infrequent Access :
  a) S3-one zone-IA is for data that is accessed less frequently but requires rapid access when needed 
  b) Data stores data in single availability zone                                                      
  c) It is a good choice for storing backup (secondary backup) copies of on premises data              
  d) Durability 99.999999999%                                                                          
  e) Availability 99.5%                                                                                

5. S3-Glacier
  A) S3-Glacier Instant-Retrieval : 
     a. It is an archive storage class that delivers the lowest cost of storage for long lived data that
     is already accessed                                          
     b. Retrieve data in milliseconds                                                                                                                                 
     c. with S3-glacier-instant-retrieval you can save upto 68% storage cost compared to using the
     standard-Infrequent-Access                                         
     d. S3 Glacier Instant Retrieval is ideal for archive data that need immediate access such as medical images,
     news media assets or user generated content archive
   
  B) S3-Glacier Flexible Retrieval :
     a. It delivers low cost storage upto 10% lower then S3 - Glacier Instant Retrieval                 
     b. For archive data that is accessed 1 or 2 times in a year and its retrieval                      
     c. For archive data that does not need immediate access but needs the flexibility to retrieve data 

  C) S3-Glaciers Deep-Archive:
     a. It is amazon S3's cheapest storage class             
     b. Data that may be accessed once or twice a year       
     c. Design to retain data for longer period eg: 20 years 
     d. Retrieval time is 12 hours                           
     e. 99.9% availability                                   

```

##  S3 Replication
```
1. Same Region Replication (SRR)
- Copies objects from one bucket to another bucket in the same AWS region
- Used for: Data redundancy, Log aggregation, Compliance requirements
- Example: Mumbai bucket → another Mumbai bucket

2. Cross Region Replication (CRR)
- Copies objects from one bucket to another bucket **in a different AWS region**
- Used for: Disaster recovery, High availability, Global access.
- Example:Mumbai bucket → Hyderabad bucket
```

##  EC2 to S3 (Upload & Download Process):
This is used when you want to transfer files between an EC2 instance and an S3 bucket.
```
Step 1: Create Resources
  a. Create a Linux EC2 instance
  b. Create an S3 bucket
  c.Give permission (S3 Full Access Create an IAM Role)   
  d. Attach the IAM role to the EC2 instance
  (IAM role allows EC2 to access S3 without access keys.)

Step 2: Connect to EC2
Login to your instance:
 → sudo su -

Step 3: Check S3 Buckets
 → aws s3 ls
(Shows list of available S3 buckets.)

Step 4: Create a File in EC2
 → touch file1.txt
 (Creates a file inside EC2.)

Step 5: Upload File to S3
 → aws s3 mv file1.txt s3://bucket_name
 (Moves (uploads) file from EC2 to S3 bucket.)

Step 6: Download File from S3
 → aws s3 cp s3://bucket_name/file1.txt .
(Copies file from S3 bucket to EC2.)

```
```
 In Simple Words
- EC2 = Server
- S3 = Storage
- IAM Role = Permission bridge between EC2 and S3
- `mv` = Upload
- `cp` = Download
```



